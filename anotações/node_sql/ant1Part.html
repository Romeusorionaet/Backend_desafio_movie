<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Anotação 1</title>
</head>
<body>

    <h1>Iníciando o arquivo server.js</h1>
    <p>
        <code>app.get("/message/:id", (request, response)=>{})</code>
        para quem solicitar a rota do método get aqui devolverá a informação de request que
        é a requisição que foi feita e o response que é o recurso que posso utilizar para fazer a resposta.
        O response manda para a api mas nesse caso, para a rota, a message usando response.send("message") e pegamos essa message da rota usando 
        o request<br>
        <code>
        response = manda algo para api/rota<br>
        request = pega algo da api/rota
        </code>
    </p>

    <p>
        route params = pode passar um valor por um parâmetro para nossa rota
        exp: https://enderecoservidor.com.br/users/5 //aqui o 5 é p parâmetro users pode ser chamado de recuros
        Para se entender que está sendo um parâmetro escremos /: logo após a barra
        Para pegar esse valor "5" no parâmetro fazemos request.params.id
        
        Podemos adicionar quantos parâmetros quisermos por exemplo, no app.get vamos adicionar mais um parâmetro chamado user depois de :id
        faremos /:user. Para ver esse valor adicionamos dentro do 
        reponse.send(request.params.user)
        
        Então: localhost:3333/message/666/romeu
        resultado = 666 romeu
    </p>
    
    <h1>Query Params</h1>
    <p>
        Query Params: vem através do nosso endereço da nossa aplicação
        estrutura
        
        https://enderecoservidor.com.br/users?page=2&limit=10
        lendo essa estrtura: 
        Quero acessar users com a query params de nome page e valor 2 e quero também ao mesmo tempo
        acessar a query params de nome limit de valor 10
        
        explicando por detalhes( users ? page = 2 & ){
            recurso = users : a rota que desejo ter acesso,
            separador de início = ? : quer dizer que oque vem na frente é uma query params,
            chave = page : nome do query (aqui colquei page como exemplo de nome),
            = : significa que vamos atribui um valor para page,
            valor = 2 : valor da page,
            separador de continuidade = & : para se caso quisermos passar mais um query params
        }     
    </p>
    
    <p>
        Para ser mais prático vamos usar o request.params por request.query
        app.get("/message", (request, response)=>{}). Para isso nem precisamos passar os parâmerto
        depois da rota. Basta usar os os valores da desestruturação
    
        exemplo como seria a busca no navegador:
    
        http://localhost:3333/movie?name=LordOfRings&id=3
    </p>
    
    <h2>Metodos de requisições</h2>
    
    <p>
        GET: Leitura
        POST: Criação / quando geralmente queremos cadastrar algo ou criar
        PUT: Atualização
        DELETE: Deleção
        PATCH: Atualização parcial
    
        Por padrão o navegador aceita apenas o GET e por isso agora usamos a ferramenta
        chamada Insomnia.
    </p>
    
    <p>
        Vamos aprender a usar o método POST. 
        Organizando o ambiente vamos ver agora o resultado por objeto do tipo JSON no insomnia.
        Ti   
    </p>
    
    <h1>Vamos aprender a usar o método POST</h1>
    
    <p>
        Organizando o ambiente vamos ver agora o resultado por objeto do tipo JSON no insomnia.
        Tipo JSON nos permite criar objeto por chave e valor.
    </p>
    
    <h2>O que pedimos do server.js</h2>
    <p><code>
        {
            "name": "Lord of Rings",
            "description": "aventura",
            "nota": "10"
        }
        
        
        app.post("/movie", (req, res)=>{
            const {name, description, note} = req.body;
            
            res.send(`name movie: ${name} description: ${description} note: ${note}`);
        });
        </code>
    </p>
    
    <h2>resultado no terminal do insomnia</h2>
    
    <p>
        name movie: Lord of Rings description: aventura note: 10
    </p>
    
    <p>
        E para o insomnia poder ler foi preciso transformar para objeto JSON no server.js da seguinte forma:
        app.use(express.json());
        O express que faz esse trabalho para a gente. Já que no insomnia esta no padrão JSON
    </p>
    
    <p>
        Agora vemos (respondemos/response) o resultado como um html no insomnia e se quisermos ver o resultado no tipo JSON
        basta: res.json({name, description, note});
        E assim vamos adotar o padrão de res.json porque é o mais usado para resposta de API. Porque fica 
        mais organizado e fácil de manipular.
    </p>
    
    <h2>Estrutura inicial do projeto</h2>
    
    <p>
        Como esse projeto irá ficar grande então vamos organizar se baseando em uma estrutura bastante usado
        que é criar uma pasta src que guarda um arquivo server.js 
        pastas: routes, controllers, utils, datadabe,sqlite e migrations. 
        Todas essas pasta irá guardar arquivos importante da nossa aplicação.
    </p>
</body>
</html>
